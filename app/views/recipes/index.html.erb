<!--  This file is app/views/movies/index.html.erb -->
<h2>All Recipes</h2>

<% if logged? %>
    <h4>Successfully Logged In, <%= valid_user.username %></h4>
<%end%>
<%= button_to "Login", '/login', method: :get%>
<%= button_to "Sign Up", '/users/new', method: :get%>
<%= button_to "Log out", '/logout', method: :delete%>

<form action="/recipes/search" method="POST">
  <%= token_tag %>
  <div class="form-group">
    <input type="text"
           class="form-control"
           id="inputSearch" name="keywords" aria-describedby="search" placeholder="Enter keywords"
           value="<%= @keyword %>"
    >
  </div>
  <button type="submit" class="btn btn-primary">Search</button>
</form>

<%#  Part 2: Start here... %>

<div class="d-flex flex-row flex-wrap justify-content-start">
  <% @recipes.each do |recipe| %>
    <div class="card my-4 mr-4" style="width: 15rem;">
      <img src="<%= recipe['image_url'] %>" class="card-img-top" alt="<%= recipe['name'] %>">
      <div class="card-body">
        <h5 class="card-title"><%= recipe['name'] %></h5>
        <div>
          <% if recipe['ingredients'] %>
            <% recipe['ingredients'].each do |ingredient| %>
              <span class="badge rounded-pill bg-light text-dark"><%= raw(ingredient) %></span>
            <% end %>
          <% end %>
        </div>
        <div class="mt-2">
          <a href="/recipes/<%= recipe['id'] %>" class="" id="<%= recipe['id'] %>">Details</a>
        </div>
      </div>
    </div>
  <% end %>
</div>
