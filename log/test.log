  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (25.4ms)[0m  [1mDROP DATABASE IF EXISTS "demeter_database_test"[0m
  [1m[35m (88.1ms)[0m  CREATE DATABASE "demeter_database_test" ENCODING = 'utf8'
  [1m[36mSQL (0.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (2.0ms)[0m  CREATE TABLE "cuisines" ("id" serial primary key, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_cuisine" ON "cuisines" USING btree ("name")[0m
  [1m[35m (0.9ms)[0m  CREATE TABLE "ingredients" ("id" serial primary key, "name" character varying NOT NULL, "calorie_per_gram" float, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_ingredient" ON "ingredients" USING btree ("name")[0m
  [1m[35m (1.1ms)[0m  CREATE TABLE "recipe_ingredients" ("id" serial primary key, "unit" character varying, "amount" float DEFAULT 0.0, "metric_unit" character varying, "metric_amount" float DEFAULT 0.0, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "recipe_id" integer, "ingredient_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE  INDEX  "index_recipe_ingredients_on_ingredient_id" ON "recipe_ingredients" USING btree ("ingredient_id")[0m
  [1m[35m (0.2ms)[0m  CREATE  INDEX  "index_recipe_ingredients_on_recipe_id" ON "recipe_ingredients" USING btree ("recipe_id")
  [1m[36m (0.8ms)[0m  [1mCREATE TABLE "recipes" ("id" serial primary key, "name" character varying NOT NULL, "steps" text NOT NULL, "image_url" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "cuisine_id" integer) [0m
  [1m[35m (0.2ms)[0m  CREATE  INDEX  "index_recipes_on_cuisine_id" ON "recipes" USING btree ("cuisine_id")
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "recipe_ingredients" ADD CONSTRAINT "fk_rails_209d9afca6"
FOREIGN KEY ("ingredient_id")
  REFERENCES "ingredients" ("id")
[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "recipe_ingredients" ADD CONSTRAINT "fk_rails_176a228c1e"
FOREIGN KEY ("recipe_id")
  REFERENCES "recipes" ("id")

  [1m[36m (0.3ms)[0m  [1mALTER TABLE "recipes" ADD CONSTRAINT "fk_rails_be504d0fa1"
FOREIGN KEY ("cuisine_id")
  REFERENCES "cuisines" ("id")
[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20221027152548')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20221027141657')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20221027152439')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20221027152112')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20221027141441')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20221027141304')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20221027141707')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#search_index as HTML
Redirected to http://test.host/recipes
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
Processing by RecipesController#search_index as HTML
  Parameters: {"keywords"=>"milk"}
Redirected to http://test.host/recipes/search/milk
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
Processing by RecipesController#search_index as HTML
  Parameters: {"keywords"=>"milk almond"}
Redirected to http://test.host/recipes/search/milk%20almond
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("id", "name", "steps", "image_url", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "recipe1"], ["steps", "Fake step"], ["image_url", "Fake url"], ["created_at", "2022-11-02 15:25:09.175699"], ["updated_at", "2022-11-02 15:25:09.175699"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "ingredients" ("id", "name", "calorie_per_gram", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["id", 1], ["name", "milk"], ["calorie_per_gram", 0.0], ["created_at", "2022-11-02 15:25:09.181881"], ["updated_at", "2022-11-02 15:25:09.181881"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ingredients" ("id", "name", "calorie_per_gram", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["id", 2], ["name", "almond"], ["calorie_per_gram", 0.0], ["created_at", "2022-11-02 15:25:09.184241"], ["updated_at", "2022-11-02 15:25:09.184241"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipe_ingredients" ("id", "unit", "amount", "metric_unit", "metric_amount", "recipe_id", "ingredient_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["id", 1], ["unit", "Fake unit"], ["amount", 0.0], ["metric_unit", "Fake metric_unit"], ["metric_amount", 0.0], ["recipe_id", 1], ["ingredient_id", 1], ["created_at", "2022-11-02 15:25:09.191509"], ["updated_at", "2022-11-02 15:25:09.191509"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "recipe_ingredients" ("id", "unit", "amount", "metric_unit", "metric_amount", "recipe_id", "ingredient_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["id", 2], ["unit", "Fake unit"], ["amount", 0.0], ["metric_unit", "Fake metric_unit"], ["metric_amount", 0.0], ["recipe_id", 1], ["ingredient_id", 2], ["created_at", "2022-11-02 15:25:09.194557"], ["updated_at", "2022-11-02 15:25:09.194557"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#search as HTML
  Parameters: {"q"=>"milk almond"}
  [1m[36mRecipe Load (0.1ms)[0m  [1mSELECT "recipes".* FROM "recipes"[0m
  [1m[35mRecipeIngredient Load (0.2ms)[0m  SELECT "recipe_ingredients".* FROM "recipe_ingredients" WHERE "recipe_ingredients"."recipe_id" IN (1)
  [1m[36mIngredient Load (0.3ms)[0m  [1mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" IN (1, 2)[0m
  Template rendering was prevented by rspec-rails. Use `render_views` to verify rendered view contents if necessary.
  Rendered recipes/index.html.erb within layouts/application (0.2ms)
  Template rendering was prevented by rspec-rails. Use `render_views` to verify rendered view contents if necessary.
Completed 200 OK in 39ms (Views: 7.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("name", "steps", "image_url", "created_at", "updated_at", "id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "recipe1"], ["steps", "1 step"], ["image_url", "url 1"], ["created_at", "2022-10-28 13:46:59.000000"], ["updated_at", "2022-10-28 13:46:59.000000"], ["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "recipes" ("name", "steps", "image_url", "created_at", "updated_at", "id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "recipe2"], ["steps", "2 steps"], ["image_url", "url 2"], ["created_at", "2022-10-28 13:47:03.000000"], ["updated_at", "2022-10-28 13:47:03.000000"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "recipes" ("name", "steps", "image_url", "created_at", "updated_at", "id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "recipe3"], ["steps", "3 steps"], ["image_url", "url 3"], ["created_at", "2022-10-28 13:47:09.000000"], ["updated_at", "2022-10-28 13:47:09.000000"], ["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "recipes" ("name", "steps", "image_url", "created_at", "updated_at", "id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "recipe4"], ["steps", "4 steps"], ["image_url", "url 4"], ["created_at", "2022-10-28 13:47:27.000000"], ["updated_at", "2022-10-28 13:47:27.000000"], ["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "ingredients" ("id", "name", "calorie_per_gram", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["id", 1], ["name", "ingredient1"], ["calorie_per_gram", 100.0], ["created_at", "2022-11-02 15:25:57.911604"], ["updated_at", "2022-11-02 15:25:57.911604"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "ingredients" ("id", "name", "calorie_per_gram", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["id", 2], ["name", "ingredient2"], ["calorie_per_gram", 200.0], ["created_at", "2022-11-02 15:25:57.913838"], ["updated_at", "2022-11-02 15:25:57.913838"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipe_ingredients" ("id", "unit", "amount", "metric_unit", "metric_amount", "recipe_id", "ingredient_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["id", 1], ["unit", "unit"], ["amount", 0.0], ["metric_unit", "metric_unit"], ["metric_amount", 0.0], ["recipe_id", 1], ["ingredient_id", 1], ["created_at", "2022-11-02 15:25:57.923629"], ["updated_at", "2022-11-02 15:25:57.923629"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "recipe_ingredients" ("id", "unit", "amount", "metric_unit", "metric_amount", "recipe_id", "ingredient_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["id", 2], ["unit", "unit"], ["amount", 0.0], ["metric_unit", "metric_unit"], ["metric_amount", 0.0], ["recipe_id", 1], ["ingredient_id", 2], ["created_at", "2022-11-02 15:25:57.926855"], ["updated_at", "2022-11-02 15:25:57.926855"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/recipes" for 127.0.0.1 at 2022-11-02 11:25:57 -0400
Processing by RecipesController#index as HTML
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes"[0m
  Rendered recipes/index.html.erb within layouts/application (2.5ms)
  Rendered layouts/_flash.erb (3.4ms)
Completed 200 OK in 284ms (Views: 283.0ms | ActiveRecord: 0.3ms)
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes"
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("name", "steps", "image_url", "created_at", "updated_at", "id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "recipe1"], ["steps", "1 step"], ["image_url", "url 1"], ["created_at", "2022-10-28 13:46:59.000000"], ["updated_at", "2022-10-28 13:46:59.000000"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("name", "steps", "image_url", "created_at", "updated_at", "id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "recipe2"], ["steps", "2 steps"], ["image_url", "url 2"], ["created_at", "2022-10-28 13:47:03.000000"], ["updated_at", "2022-10-28 13:47:03.000000"], ["id", 2]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("name", "steps", "image_url", "created_at", "updated_at", "id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "recipe3"], ["steps", "3 steps"], ["image_url", "url 3"], ["created_at", "2022-10-28 13:47:09.000000"], ["updated_at", "2022-10-28 13:47:09.000000"], ["id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "recipes" ("name", "steps", "image_url", "created_at", "updated_at", "id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "recipe4"], ["steps", "4 steps"], ["image_url", "url 4"], ["created_at", "2022-10-28 13:47:27.000000"], ["updated_at", "2022-10-28 13:47:27.000000"], ["id", 4]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "ingredients" ("id", "name", "calorie_per_gram", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["id", 1], ["name", "ingredient1"], ["calorie_per_gram", 100.0], ["created_at", "2022-11-02 15:25:58.257559"], ["updated_at", "2022-11-02 15:25:58.257559"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "ingredients" ("id", "name", "calorie_per_gram", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["id", 2], ["name", "ingredient2"], ["calorie_per_gram", 200.0], ["created_at", "2022-11-02 15:25:58.259858"], ["updated_at", "2022-11-02 15:25:58.259858"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipe_ingredients" ("id", "unit", "amount", "metric_unit", "metric_amount", "recipe_id", "ingredient_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["id", 1], ["unit", "unit"], ["amount", 0.0], ["metric_unit", "metric_unit"], ["metric_amount", 0.0], ["recipe_id", 1], ["ingredient_id", 1], ["created_at", "2022-11-02 15:25:58.262606"], ["updated_at", "2022-11-02 15:25:58.262606"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipe_ingredients" ("id", "unit", "amount", "metric_unit", "metric_amount", "recipe_id", "ingredient_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["id", 2], ["unit", "unit"], ["amount", 0.0], ["metric_unit", "metric_unit"], ["metric_amount", 0.0], ["recipe_id", 1], ["ingredient_id", 2], ["created_at", "2022-11-02 15:25:58.265207"], ["updated_at", "2022-11-02 15:25:58.265207"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/recipes" for 127.0.0.1 at 2022-11-02 11:25:58 -0400
Processing by RecipesController#index as HTML
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes"[0m
  Rendered recipes/index.html.erb within layouts/application (1.2ms)
  Rendered layouts/_flash.erb (0.2ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.3ms)
  [1m[35mRecipe Load (0.2ms)[0m  SELECT  "recipes".* FROM "recipes" WHERE "recipes"."name" = $1 LIMIT 1  [["name", "recipe1"]]
Started GET "/recipes/1" for 127.0.0.1 at 2022-11-02 11:25:58 -0400
Processing by RecipesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRecipe Load (1.8ms)[0m  [1mSELECT  "recipes".* FROM "recipes" INNER JOIN "recipe_ingredients" ON "recipe_ingredients"."recipe_id" = "recipes"."id" INNER JOIN "recipe_ingredients" "recipe_ingredients_recipes_join" ON "recipe_ingredients_recipes_join"."recipe_id" = "recipes"."id" INNER JOIN "ingredients" ON "ingredients"."id" = "recipe_ingredients_recipes_join"."ingredient_id" WHERE "recipes"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mRecipeIngredient Load (0.5ms)[0m  SELECT "recipe_ingredients".* FROM "recipe_ingredients" WHERE "recipe_ingredients"."recipe_id" = $1  [["recipe_id", 1]]
  [1m[36mIngredient Load (0.3ms)[0m  [1mSELECT "ingredients".* FROM "ingredients" INNER JOIN "recipe_ingredients" ON "ingredients"."id" = "recipe_ingredients"."ingredient_id" WHERE "recipe_ingredients"."recipe_id" = $1[0m  [["recipe_id", 1]]
  Rendered recipes/show.html.erb within layouts/application (0.7ms)
  Rendered layouts/_flash.erb (0.2ms)
Completed 200 OK in 26ms (Views: 2.5ms | ActiveRecord: 3.8ms)
  [1m[35mRecipe Load (0.3ms)[0m  SELECT  "recipes".* FROM "recipes" WHERE "recipes"."name" = $1 LIMIT 1  [["name", "recipe1"]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
